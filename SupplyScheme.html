<!DOCTYPE html>
<html lang="en">
<head>
 <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
  <title>Forest</title>
  <link rel="stylesheet" href="provider.css ">
 <style>
 #nav li:hover ul li a:hover{ /* стили для конкретных выпадающих пунктов, при наведении на них курсора */
    
    background:rgba(50,50,50,1); /* Полупрозрачность. */
   
}
 </style>
</head>
<body>

 <header> 
<h1> График поставок </h1>



<!--Меню-->
    <ul id="nav" >
        <li>
            <a href="#" title="Меню"  id="menu" ><img src="https://upload.wikimedia.org/wikipedia/commons/thumb/b/b2/Hamburger_icon.svg/1200px-Hamburger_icon.svg.png" width="30px" height="30px"  ></a>
            <ul>
                <li><a href="Consigner.html">Грузоотправители </a></li>
                <li><a href="Provider.html">Поставщики </a></li>
                <li><a href="ProvCons.html">Взаимосвязь</a></li>
                <li><a href="Wagons.html">Вагоны </a></li>
                <li><a href="ScheduleWagons.html">Расписание вагонов </a></li>
                <li><a href="page1.html">Настройки </a></li>
                <li><a href="site.html#">Главная </a></li>
            </ul>
        </li>
    </ul>
 </header>

<main>
    
<section>
       

        <form id="typeTbl" action="select1.php" method="post">
            <p id="typeWag">Выберите тип вагона</p>
                <p><select size="1" name="type" id="type">
                 <option disabled selected></option>
                 <option value="Щепа">Щепа</option>
                 <option value="Опилки">Опилки</option>
                 <option value="Бревна">Бревна</option>
                 <option value="Доски">Доски</option>
                </select></p>
                
        </form>

        <form id="dateTbl" action="select1.php" method="post">
            <p id="dateChoose">Выбор даты</p>
                <p id="dateWag">Выберите дату</p>
                    <p><select size="1" name="type" id="type">
                     <option disabled selected></option>
                     <option value="1">1</option>
                     <option value="2">2</option>
                     <option value="3">3</option>
                     <option value="4">4</option>
                     <option value="5">5</option>
                     <option value="6">6</option>
                     <option value="7">7</option>
                     <option value="8">8</option>
                     <option value="9">9</option>
                     <option value="10">10</option>
                     <option value="11">11</option>
                     <option value="12">12</option>
                     <option value="13">13</option>
                     <option value="14">14</option>
                     <option value="15">15</option>
                     <option value="16">16</option>
                     <option value="17">17</option>
                     <option value="18">18</option>
                     <option value="19">19</option>
                     <option value="20">20</option>
                     <option value="21">21</option>
                     <option value="22">22</option>
                     <option value="23">23</option>
                     <option value="24">24</option>
                     <option value="25">25</option>
                     <option value="26">26</option>
                     <option value="27">27</option>
                     <option value="28">28</option>
                     <option value="29">29</option>
                     <option value="30">30</option>
                     <option value="31">31</option>
                    </select></p>
                    
            </form>
 
            <form id="monthTbl" action="select1.php" method="post">
                    <p id="dateWag">Выберите месяц</p>
                        <p><select size="1" name="type" id="type">
                         <option disabled selected></option>
                         <option value="Январь">Январь</option>
                         <option value="Февраль">Февраль</option>
                         <option value="Март">Март</option>
                         <option value="Апрель">Апрель</option>
                         <option value="Май">Май</option>
                         <option value="Июнь">Июнь</option>
                         <option value="Июль">Июль</option>
                         <option value="Август">Август</option>
                         <option value="Сентябрь">Сентябрь</option>
                         <option value="Октябрь">Октябрь</option>
                         <option value="Ноябрь">Ноябрь</option>
                         <option value="Декабрь">Декабрь</option>
                        </select></p>
                        
                    </form>
       <button id="otch">Отчет</button>

        <table id='mytbl'>
            <tbody id='tbody'>
                    <tr>
                        <th>Идентификатор поставок</th>
                        <th>Наименование грузоотправителя</th>
                        <th>Количество вагонов</th>
                        <th>Тип вагона</th>
                        <th>Дата отправки</th>
                       
                    </tr>
            </tbody>
    </table>

        
</section>


<script type="text/javascript">


        window.onload = function (){ 
        var obj; 
         
         //Получение данных с сервера    
         // 1. Создаём новый объект XMLHttpRequest
         var xhr = new XMLHttpRequest();
         
         xhr.open('GET', 'http://kappa.cs.petrsu.ru/~akulov/Practice/showSupply.php',false);
         
         // 3. Отсылаем запрос
         xhr.send();
         
         // 4. Если код ответа сервера не 200, то это ошибка
         if (xhr.status != 200) {
           // обработать ошибку
           console.log(xhr);
           alert( xhr.status + ': ' + xhr.statusText );  //пример вывода: 404: Not Found
         } else {
         
                 ourObj = JSON.parse(xhr.responseText);
                
         
         }
         

        //Данные для таблицы
        var myBtn = document.getElementById('build');
        var mytbl = document.getElementById('mytbl');
        var tb = mytbl.querySelector('tbody');
        
        // event process
        var clearTable = function(countRow){
            if (countRow > 1) {
                for (i=tb.rows.length-1; i>0; i--){
                    tb.deleteRow(i);
                }
            }
        }
        
 
            clearTable(tb.rows.length)
            ourObj.forEach(function(item, i, arr) {
                var tr = document.createElement('tr');
                var id = item.supId;
            
                tr.id = `row-${id}`;
                tr.innerHTML = `<td >${id}</td>
                                <td>${item.supNameCons}</td>
                                <td>${item.supQuantityWagon}</td>
                                <td>${item.supTypeWagon}</td>
                                <td>${item.supDate}</td>`
                                
                                tb.appendChild(tr);
               
        });
        }
     document.getElementById('e6').onclick=function(){
    document.getElementById('button2').style.display='block';
}
      
   </script>
</main>
<footer>
        <address>...</address>
        <small>@2019...</small>
  </footer>
  
</body>


</html>